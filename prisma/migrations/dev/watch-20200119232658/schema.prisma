generator photon {
    provider = "photonjs"
}

datasource db {
    provider = "postgresql"
    url = "***"
}

model Organization {
    id       String  @default(cuid()) @id
    clientId String  @default(uuid()) @unique
    name     String?

    keys Key[]
}

model Environment {
    id           String       @default(cuid()) @id
    organization Organization
    name         String
}

model Key {
    id          String       @default(cuid()) @id
    value       String       @default(uuid()) @unique
    createdAt   DateTime     @default(now())
    environment Environment?
}

model Variant {
    id    String @default(cuid()) @id
    value String
}

model Switch {
    id             String        @default(cuid()) @id
    name           String
    key            String
    type           SwitchType
    environments   Environment[]
    enabled        Boolean       @default(false)
    defaultVariant Variant?      @relation(name: "defaultVariant")
    variants       Variant[]     @relation(name: "variants")
    organization   Organization
    createdAt      DateTime      @default(now())
    updatedAt      DateTime      @updatedAt

}

enum SwitchType {
    Boolean
    Multi
}